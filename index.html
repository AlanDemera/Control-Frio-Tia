<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Control Productos T√çA ‚Äî M√≥vil Pro 3.0</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<meta name="description" content="Control de productos T√çA ‚Äî dise√±o m√≥vil profesional, rojo/blanco, lector de c√≥digos y pesta√±a historial.">

<!-- ICONOS PANTALLA PRINCIPAL -->
<link rel="apple-touch-icon" sizes="180x180" href="assets/icon-192.png">
<link rel="icon" type="image/png" sizes="192x192" href="assets/icon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="assets/icon-512.png">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#D32F2F">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<style>
:root{
  --bg:#ffffff;
  --surface:#fbfbfb;
  --text:#0f172a;
  --muted:#6b7280;
  --red:#D32F2F;
  --red-600:#C12727;
  --green:#1E9B52;
  --yellow:#F59E0B;
  --card-radius:14px;
  --shadow:0 8px 24px rgba(2,6,23,0.08);
  --gap:14px;
  font-family:'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* MOBILE-FIRST */
*{box-sizing:border-box;}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;}
.app{max-width:540px;margin:0 auto;height:100vh;display:flex;flex-direction:column;padding:12px;gap:16px}

/* HEADER */
.header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px;border-radius:12px;background:linear-gradient(90deg,var(--red),var(--red-600));color:white;box-shadow:var(--shadow);}
.brand{display:flex;flex-direction:column;gap:2px}
.brand .title{font-size:18px;font-weight:700;letter-spacing:0.2px}
.brand .subtitle{font-size:12px;opacity:0.95}
.header .logo{width:48px;height:48px;border-radius:12px;object-fit:contain;}
@media(min-width:520px){.header .logo{width:56px;height:56px;}}

/* BOT√ìN AGREGAR */
.btn-add{background:white;color:var(--red);border:none;padding:10px 14px;border-radius:12px;font-weight:700;font-size:15px;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.08);}
.btn-add:active{transform:translateY(1px);}

/* FILTROS */
.filters{display:flex;gap:10px;overflow-x:auto;padding-bottom:4px;margin-bottom:8px;}
.filter-chip{flex:0 0 auto;padding:10px 14px;border-radius:999px;border:2px solid var(--red);color:var(--red);background:transparent;font-weight:600;font-size:14px;cursor:pointer;white-space:nowrap;}
.filter-chip.active{background:var(--red);color:white;box-shadow:0 6px 18px rgba(209,52,52,0.12);}

/* MAIN SCROLL AREA */
.main-scroll{flex:1;overflow:auto;padding-bottom:90px;display:flex;flex-direction:column;gap:16px;}

/* SECTION TITLES */
.section-title{font-size:16px;font-weight:700;margin:4px 0 8px 0;color:var(--muted);display:flex;align-items:center;gap:8px}

/* PRODUCT CARD */
.product-card{background:var(--surface);border-radius:var(--card-radius);padding:14px;display:flex;justify-content:space-between;align-items:flex-start;gap:12px;box-shadow:var(--shadow);border-left:6px solid transparent;}
.product-left{flex:1;display:flex;flex-direction:column;gap:6px;}
.product-name{font-size:16px;font-weight:700;}
.product-meta{font-size:13px;color:var(--muted);}
.product-code{font-size:13px;color:#444;}
.product-card.caducado{border-left-color:var(--red);}
.product-card.proximo{border-left-color:var(--yellow);}
.product-card.vigente{border-left-color:var(--green);}
.product-actions{display:flex;flex-direction:column;gap:10px;align-items:flex-end;}
.badge{padding:6px 10px;border-radius:10px;font-weight:700;font-size:13px;color:white;}
.badge.red{background:var(--red);}
.badge.yellow{background:var(--yellow);color:#222;}
.badge.green{background:var(--green);}
.btn-action{padding:10px 14px;border-radius:10px;border:none;background:var(--red);color:white;font-weight:700;font-size:14px;cursor:pointer}
.btn-action.ghost{background:transparent;border:2px solid var(--red);color:var(--red);font-weight:700}

/* GROUP LIST */
.list-group{display:flex;flex-direction:column;gap:12px}

/* MODAL */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;align-items:center;justify-content:center;padding:18px;z-index:50}
.modal-backdrop.show{display:flex}
.modal{width:100%;max-width:520px;background:white;border-radius:16px;padding:16px;box-shadow:0 20px 40px rgba(0,0,0,0.25)}
.modal h3{margin:0 0 8px 0;font-size:18px}
.form-field{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
.input{padding:12px;border-radius:10px;border:1px solid #eee;font-size:15px}
.input::placeholder{color:#9aa0a6}
.hint{font-size:12px;color:var(--muted)}

/* Reader */
#reader{width:100%;height:280px;background:#000;border-radius:10px;overflow:hidden;display:none}

/* TABBAR */
.tabbar{position:fixed;left:0;right:0;bottom:0;display:flex;justify-content:space-between;gap:12px;padding:12px;background:white;border-top:1px solid #f0f0f0;}
.tab-btn{flex:1;padding:12px;border-radius:12px;border:none;background:transparent;font-weight:700;font-size:16px;cursor:pointer}
.tab-btn.active{background:linear-gradient(90deg,var(--red),var(--red-600));color:white;box-shadow:0 8px 20px rgba(209,52,52,0.12)}

/* HISTORY */
.history-card{background:#fff;border-radius:12px;padding:12px;box-shadow:var(--shadow);display:flex;justify-content:space-between;align-items:center;gap:10px;}
.history-left{display:flex;flex-direction:column;gap:6px;}
.small-muted{font-size:13px;color:var(--muted)}

@media(min-width:520px){.app{padding:18px}.product-name{font-size:18px;}}
</style>
</head>
<body>

<div class="app">
  <!-- HEADER -->
  <div class="header" role="banner">
    <div class="brand">
      <div class="title">Control Productos T√çA</div>
      <div class="subtitle">Refrigerados ‚Äî dise√±o profesional</div>
    </div>
    <img id="logo" src="assets/icon-192.png" alt="Logo T√çA" class="logo">
    <button id="btnAdd" class="btn-add" aria-label="Agregar producto">‚ûï Agregar</button>
  </div>

  <!-- FILTROS + SEARCH -->
  <div>
    <div class="filters" id="filters" aria-label="Categor√≠as">
      <button class="filter-chip active" data-filter="all">Todos</button>
      <button class="filter-chip" data-filter="lacteos">üßÄ L√°cteos</button>
      <button class="filter-chip" data-filter="embutidos">ü•© Embutidos</button>
      <button class="filter-chip" data-filter="carnes">üçó Carnes</button>
      <button class="filter-chip" data-filter="fruver">üçé Fruver</button>
      <button class="filter-chip" data-filter="congelados">‚ùÑÔ∏è Congelados</button>
    </div>
    <div style="margin-top:10px">
      <input id="search" class="input" type="search" placeholder="Buscar por nombre o c√≥digo">
      <div class="hint" style="margin-top:6px">Los productos que est√©n <strong>caducados</strong> aparecen primero.</div>
    </div>
  </div>

  <!-- MAIN SCROLL -->
  <div class="main-scroll" id="mainScroll" role="main">
    <section>
      <div class="section-title">üî¥ A CADUCAR</div>
      <div id="group-caducados" class="list-group" aria-live="polite"></div>
    </section>
    <section>
      <div class="section-title">üü° PR√ìXIMOS A CADUCAR</div>
      <div id="group-proximos" class="list-group" aria-live="polite"></div>
    </section>
    <section>
      <div class="section-title">üü¢ VIGENTES</div>
      <div id="group-vigentes" class="list-group" aria-live="polite"></div>
    </section>
  </div>
</div>

<!-- HISTORIAL -->
<div style="display:none" id="historyView" aria-hidden="true">
  <div style="padding:14px">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <div style="font-weight:700;font-size:18px">üìú Historial de retirados</div>
      <button id="backToProducts" class="tab-btn" style="flex:0;background:transparent;border-radius:8px;padding:8px 10px;color:var(--red);border:2px solid var(--red)">‚¨Ö Volver</button>
    </div>
    <div id="historyList" style="display:flex;flex-direction:column;gap:10px;padding-bottom:120px"></div>
  </div>
</div>

<!-- MODAL + JS permanece igual, se puede copiar directamente del c√≥digo que ya tienes -->
<script src="https://unpkg.com/html5-qrcode@2.3.7/minified/html5-qrcode.min.js"></script>
<script>
// TODO: Copiar todo tu JS existente aqu√≠ (scanner, modal, render, seed, etc.)
</script>
</body>
</html>
